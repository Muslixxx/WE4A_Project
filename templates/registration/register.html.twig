{% extends 'base.html.twig' %}

{% block title %}Inscription{% endblock %}
{% set fixed_page = true %}
{% set show_navbar = false %}

{% block body %}
    <div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh; margin-top: -50px;">
        <div class="p-4" style="
        background-color: #42a5f5;
        border-radius: 15px;
        max-width: 450px;
        width: 100%;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    ">
            <h1 style="
            font-family: 'Luckiest Guy', cursive;
            font-size: 2.2rem;
            color: #fff;
            text-align: center;
            text-shadow: 2px 2px 0 #0003;
            margin-bottom: 1rem;
        ">
                Inscription à Moodneuille
            </h1>

            <p style="
            text-align: center;
            color: #fff;
            font-family: 'Comic Neue', cursive;
            margin-bottom: 2rem;
        ">
                Remplissez les champs pour vous inscrire.
            </p>

            <form method="POST" action="{{ path('app_register') }}">
                <div class="mb-3">
                    <label for="email" style="color: #fff; font-weight: bold;">Email :</label>
                    <input type="email" id="email" name="email" placeholder="Entrez votre email..." class="form-control"
                           style="border-radius: 8px; background-color: #fff;" required />
                </div>

                <div class="mb-3">
                    <label for="password" style="color: #fff; font-weight: bold;">Mot de passe :</label>
                    <div class="input-group">
                        <input type="password" id="password" name="password" placeholder="Entrez votre mot de passe..."
                               class="form-control" style="border-radius: 8px; background-color: #fff;" required />
                        <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-eye" viewBox="0 0 16 16">
                                <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8z"/>
                                <path d="M8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="confirmPassword" style="color: #fff; font-weight: bold;">Confirmer le mot de passe :</label>
                    <div class="input-group">
                        <input type="password" id="confirmPassword" name="confirm_password"
                               placeholder="Confirmez votre mot de passe..." class="form-control"
                               style="border-radius: 8px; background-color: #fff;" required />
                        <button class="btn btn-outline-secondary" type="button" id="toggleConfirmPassword">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-eye" viewBox="0 0 16 16">
                                <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8z"/>
                                <path d="M8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="first_name" style="color: #fff; font-weight: bold;">Prénom :</label>
                    <input type="text" id="first_name" name="first_name" class="form-control"
                           placeholder="Entrez votre prénom..." style="border-radius: 8px; background-color: #fff;" required />
                </div>

                <div class="mb-3">
                    <label for="last_name" style="color: #fff; font-weight: bold;">Nom :</label>
                    <input type="text" id="last_name" name="last_name" class="form-control"
                           placeholder="Entrez votre nom..." style="border-radius: 8px; background-color: #fff;" required />
                </div>

                <div class="mb-3">
                    <label for="phone_number" style="color: #fff; font-weight: bold;">Téléphone :</label>
                    <input type="tel" id="phone_number" name="phone_number" class="form-control"
                           placeholder="Ex: 0612345678" style="border-radius: 8px; background-color: #fff;" required />
                </div>

                <div class="mb-3">
                    <label for="birth_date" style="color: #fff; font-weight: bold;">Date de naissance :</label>
                    <input type="date" id="birth_date" name="birth_date" class="form-control"
                           style="border-radius: 8px; background-color: #fff;" required />
                </div>

                <div class="mb-3">
                    <label style="color: #fff; font-weight: bold;">Rôle :</label><br/>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="role" id="radio-1" value="eleve" checked>
                        <label class="form-check-label text-white" for="radio-1">Élève</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="role" id="radio-2" value="prof">
                        <label class="form-check-label text-white" for="radio-2">Prof</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="role" id="radio-3" value="admin">
                        <label class="form-check-label text-white" for="radio-3">Admin</label>
                    </div>
                </div>

                <div class="text-center">
                    <button type="submit" id="register-button" class="btn btn-light btn-lg mt-3 px-5">
                        CONFIRMER
                    </button>
                </div>
            </form>

            <div id="error-container" style="text-align: center; margin-top: 15px; color: red;"></div>

            <div style="text-align: center; margin-top: 15px;">
                <button type="button" onclick="window.history.back()" class="btn btn-secondary">Retour</button>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        document.addEventListener('turbo:load', function () {
            const togglePassword = document.getElementById('togglePassword');
            const passwordInput = document.getElementById('password');
            const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
            const confirmPasswordInput = document.getElementById('confirmPassword');

            if (togglePassword && passwordInput) {
                togglePassword.addEventListener('click', function () {
                    passwordInput.type = passwordInput.type === 'password' ? 'text' : 'password';
                });
            }

            if (toggleConfirmPassword && confirmPasswordInput) {
                toggleConfirmPassword.addEventListener('click', function () {
                    confirmPasswordInput.type = confirmPasswordInput.type === 'password' ? 'text' : 'password';
                });
            }
        });
    </script>
{% endblock %}
